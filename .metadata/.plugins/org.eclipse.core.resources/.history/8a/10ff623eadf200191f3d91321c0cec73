package application;

public class ServiceOfAdaptorMessenger {
	private IMessaging sending;
	
	public void sendLongText(String longMessage){
		String finalMessage = "";
		
		sending = new AdaptorInputLongText();
		sending.sendTheMessage(finalMessage);
	}
	
	public void sendShortText(String shortMessage){
		String finalMessage = "";
		
		sending = new AdaptorInputShortText();
		sending.sendTheMessage(finalMessage);
	}
	
	public void sendCalculateableText(String operationMessage){
		Integer result = 0;

		if(operationMessage.contains("+"))
			doTheOperation(operationMessage.split("+"), Operation.ADDING);
		if(operationMessage.contains("-"))
			doTheOperation(operationMessage.split("-"), Operation.SUBTARCTING);
		if(operationMessage.contains("*"))
			doTheOperation(operationMessage.split("*"), Operation.MULTIPLYING);
		if(operationMessage.contains("/"))
			doTheOperation(operationMessage.split("/"), Operation.DIVIDING);
		
		sending = new AdaptorInputCalculateingText();
		sending.sendTheMessage(finalMessage);
	}
	
	private Integer doTheOperation(String[] parts, Operation op ){
		try{
			if(op == Operation.ADDING)
				return Integer.parseInt(parts[0]) + Integer.parseInt(parts[1]);
			else if(op == Operation.SUBTARCTING)
				return Integer.parseInt(parts[0]) - Integer.parseInt(parts[1]);
			else if(op == Operation.MULTIPLYING)
				return (Integer) (Integer.parseInt(parts[0]) * Integer.parseInt(parts[1]));
			else {
				if(parts[1].equals("0"))
					return 0;
				return (Integer)(Integer.parseInt(parts[0]) / Integer.parseInt(parts[1]));
			}
		}catch (Exception e) {
			e.getStackTrace();
		}
		return 0;
	}
	
	private enum Operation {
		ADDING, SUBTARCTING, MULTIPLYING, DIVIDING
	}
}
