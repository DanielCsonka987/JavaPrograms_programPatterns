package application;

import java.net.URL;
import java.util.ResourceBundle;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextField;

public class MainWindowController implements Initializable {
	@FXML
	private TableView<Employee> tableEmployee;

	@FXML
	private TableColumn<Employee, Number> ids;
	@FXML
	private TableColumn<Employee, String> names;
	@FXML
	private TableColumn<Employee, String> genders;
	@FXML
	private TableColumn<Employee, Number> birthYears;
	@FXML
	private TableColumn<Employee, String> positions;
	@FXML
	private TableColumn<Employee, String> areas;

	@FXML
	private TextField txtFieldName1;

	@FXML
	private Button btnAddOne;

	@FXML
	private Button btnAddTwo;

	@FXML
	private ComboBox<String> cmbbxPosit;

	@FXML
	private ComboBox<String> cmbbxArea;

	@FXML
	private TextField txtFieldName2;

	@FXML
	private ComboBox<String> cmbbxGender;

	@FXML
	private TextField txtFieldBirth;

	private ObservableList<Employee> list;
	private Integer counter = 1;

	@Override
	public void initialize(URL location, ResourceBundle resources) {
		list = FXCollections.observableArrayList();
		
		loadInTestData();
		adjustAndLoadInTableView();
	}

	private void adjustAndLoadInTableView() {

		ids = new TableColumn<Employee, Number>();
		ids.setCellValueFactory(c -> c.getValue().getIdProp());
		names = new TableColumn<Employee, String>();
		names.setCellValueFactory(c -> c.getValue().getNameProp());
		genders = = new TableColumn<Employee, String>();
		genders.setCellValueFactory(c -> c.getValue().getGenderProp());
		birthYears = new TableColumn<Employee, Number>();
		birthYears.setCellValueFactory(c -> c.getValue().getBirthYearProp());
		positions = new TableColumn<Employee, String>();
		positions.setCellValueFactory(c -> c.getValue().getPositionProp());
		areas.setCellValueFactory(c -> c.getValue().getAreaProp());

		tableEmployee.setItems(list);
	}

	private void loadInTestData() {
		list.add(new Employee(counter, "James Bond", "male", 1932, "Director", "NewYork"));
		counter++;
	}

	@FXML
	void saveFirstFormContent(ActionEvent event) {
		if(reviseFormOneFilled()){
			Employee emp = new EmployeeBuilder(counter, txtFieldName1.getText())
					.setArea(cmbbxArea.getSelectionModel().getSelectedItem())
					.setPosition(cmbbxGender.getSelectionModel().getSelectedItem())
					.finishBuild();
			list.add(emp);
			counter++;
		}
	}

	private boolean reviseFormOneFilled() {
		// TODO Auto-generated method stub
		return false;
	}

	@FXML
	void saveSecondFromContent(ActionEvent event) {

	}

}
